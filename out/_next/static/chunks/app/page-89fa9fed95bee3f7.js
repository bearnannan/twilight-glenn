(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{8310:function(e,s,t){Promise.resolve().then(t.bind(t,6991))},6991:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return p}});var l=t(3827),a=t(4090),r=t(2020);let n={width:"100%",height:"100%"},o={lat:14,lng:99.5};function i(e){let{projects:s,selectedProjectId:t,onSelectProject:i}=e,c=(0,a.useRef)(null);(0,a.useEffect)(()=>{if(t&&c.current){let e=s.find(e=>e.id===t);(null==e?void 0:e.coordinates)&&(c.current.panTo(e.coordinates),c.current.setZoom(12))}},[t,s]);let d=(e,s)=>{let t="http://maps.google.com/mapfiles/ms/icons";return s?"".concat(t,"/blue-dot.png"):e>=50?"".concat(t,"/green-dot.png"):"".concat(t,"/orange-dot.png")};return(0,l.jsxs)("div",{className:"w-full h-full relative bg-gray-200",children:[(0,l.jsx)(r.KJ,{googleMapsApiKey:"AIzaSyAoJ9W3rOulQTZsii90gTPKTCxRAJt8EhY",children:(0,l.jsx)(r.b6,{mapContainerStyle:n,center:o,zoom:9,onLoad:e=>{c.current=e},options:{disableDefaultUI:!1,zoomControl:!0,streetViewControl:!1,mapTypeControl:!1,fullscreenControl:!1},children:s.map(e=>(0,l.jsx)(r.Jx,{position:e.coordinates,title:e.title,onClick:()=>i(e.id),icon:d(e.progress,t===e.id),animation:t===e.id?google.maps.Animation.BOUNCE:void 0},e.id))})}),(0,l.jsxs)("div",{className:"absolute bottom-6 left-6 bg-white p-3 rounded-lg shadow-lg z-10 text-xs space-y-2",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)("div",{className:"w-3 h-3 rounded-full bg-blue-500"}),(0,l.jsx)("span",{children:"ที่เลือก (Selected)"})]}),(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)("div",{className:"w-3 h-3 rounded-full bg-green-500"}),(0,l.jsxs)("span",{children:["ก้าวหน้า ",">"," 50%"]})]}),(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)("div",{className:"w-3 h-3 rounded-full bg-orange-500"}),(0,l.jsxs)("span",{children:["ก้าวหน้า ","<"," 50%"]})]})]})]})}var c=t(703),d=t(7307),x=t(2457),m=t(3441);function h(e){let{project:s}=e,t=s.progress>=50;return(0,l.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden hover:shadow-md transition-shadow",children:[(0,l.jsxs)("div",{className:"relative h-32 w-full",children:[(0,l.jsx)(c.default,{src:s.imageUrl,alt:s.title,fill:!0,className:"object-cover"}),(0,l.jsx)("div",{className:"absolute inset-0 bg-gradient-to-t from-black/70 to-transparent"}),(0,l.jsxs)("div",{className:"absolute top-2 right-2 px-2 py-1 rounded-full text-xs font-bold flex items-center gap-1 ".concat(t?"bg-green-100 text-green-700":"bg-orange-100 text-orange-700"),children:[(0,l.jsx)("div",{className:"w-2 h-2 rounded-full ".concat(t?"bg-green-500":"bg-orange-500")}),s.progress,"%"]}),(0,l.jsxs)("div",{className:"absolute bottom-2 left-3 right-3 text-white",children:[(0,l.jsxs)("div",{className:"flex items-center gap-1 text-[10px] opacity-80 mb-0.5",children:[(0,l.jsx)(d.Z,{className:"w-3 h-3"}),(0,l.jsxs)("span",{children:["เริ่ม: ",s.startDate]})]}),(0,l.jsx)("h3",{className:"font-bold text-sm leading-tight line-clamp-2",children:s.title})]})]}),(0,l.jsxs)("div",{className:"p-3",children:[(0,l.jsxs)("div",{className:"flex items-start gap-2 mb-3 text-gray-500 text-xs",children:[(0,l.jsx)(x.Z,{className:"w-3.5 h-3.5 mt-0.5 shrink-0"}),(0,l.jsx)("span",{className:"line-clamp-2",children:s.locationName})]}),(0,l.jsxs)("details",{className:"group border-t border-gray-100 pt-2",children:[(0,l.jsxs)("summary",{className:"flex items-center justify-between cursor-pointer list-none text-xs font-medium text-gray-600 hover:text-blue-600 transition-colors",children:[(0,l.jsxs)("span",{children:["รายการดำเนินงาน (",s.actionItems.length,")"]}),(0,l.jsx)(m.Z,{className:"w-4 h-4 transition-transform group-open:rotate-180"})]}),(0,l.jsx)("ul",{className:"mt-2 space-y-1 pl-4 border-l-2 border-gray-100 ml-1",children:s.actionItems.map((e,s)=>(0,l.jsx)("li",{className:"text-xs text-gray-500",children:e},s))})]})]})]})}var g=t(4178);function u(e){let{projects:s,selectedProjectId:t,onSelectProject:a}=e;return(0,l.jsxs)("aside",{className:"bg-gray-50 h-full flex flex-col border-l border-gray-200",children:[(0,l.jsxs)("div",{className:"p-4 bg-white border-b border-gray-200 flex items-center justify-between sticky top-0 z-10",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2 text-[#1a233a]",children:[(0,l.jsx)(g.Z,{className:"w-5 h-5 text-orange-500"}),(0,l.jsx)("h2",{className:"font-bold text-lg",children:"รายงานความคืบหน้า"})]}),(0,l.jsxs)("span",{className:"bg-gray-100 text-gray-600 text-xs font-bold px-2 py-1 rounded-full",children:[s.length," รายการ"]})]}),(0,l.jsx)("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:s.map(e=>(0,l.jsx)("div",{onClick:()=>a(e.id),className:"cursor-pointer transition-all duration-200 ".concat(t===e.id?"ring-2 ring-orange-500 rounded-lg shadow-md scale-[1.02]":"hover:bg-gray-100/50"),children:(0,l.jsx)(h,{project:e})},e.id))})]})}function p(e){let{initialProjects:s}=e,[t,r]=(0,a.useState)(null),n=e=>{r(e)};return(0,l.jsxs)("div",{className:"flex-1 pt-16 grid grid-cols-1 md:grid-cols-12 overflow-hidden",children:[(0,l.jsx)("div",{className:"md:col-span-8 h-1/2 md:h-full relative",children:(0,l.jsx)(i,{projects:s,selectedProjectId:t,onSelectProject:n})}),(0,l.jsx)("div",{className:"md:col-span-4 h-1/2 md:h-full bg-white z-20 shadow-xl overflow-hidden",children:(0,l.jsx)(u,{projects:s,selectedProjectId:t,onSelectProject:n})})]})}}},function(e){e.O(0,[910,31,971,69,744],function(){return e(e.s=8310)}),_N_E=e.O()}]);